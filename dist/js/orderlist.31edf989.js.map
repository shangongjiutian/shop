{"version":3,"file":"js/orderlist.31edf989.js","mappings":"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","sources":["webpack://shop/./src/components/Docker.vue","webpack://shop/./src/components/Docker.vue?f302","webpack://shop/./src/views/orderList/OrderList.vue","webpack://shop/./src/views/orderList/OrderList.vue?8702"],"sourcesContent":["<template>\r\n  <div class=\"docker\">\r\n    <div\r\n      v-for=\"(item, index) in dockerList\" :class=\"{'docker__item': true, 'docker__item--active': index === currentIndex }\"\r\n     :key=\"item.icon\">\r\n     <router-link :to=\"item.to\">\r\n      <div class=\"iconfont\" v-html=\"item.icon\"></div>\r\n      <div class=\"docker__title\">{{item.text}}</div>\r\n    </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'Docker',\r\n  props: ['currentIndex'],\r\n  setup () {\r\n    const dockerList = [\r\n      { icon: '&#xe867;', text: '首页', to: { name: 'Home' } },\r\n      { icon: '&#xe73e;', text: '购物车', to: { name: 'CartList' } },\r\n      { icon: '&#xe608;', text: '订单', to: { name: 'OrderList' } },\r\n      { icon: '&#xe78b;', text: '我的', to: { name: 'MyAdmin' } }\r\n    ]\r\n    return { dockerList }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../style/viriables.scss';\r\n.docker {\r\n  display:flex;\r\n  position:  fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: .49rem;\r\n  background: #fff;\r\n  border-top:.01rem solid #f1f1f1;\r\n  padding:0 .18rem;\r\n  box-sizing: border-box;\r\n  color:$content-fontcolor;\r\n  &__item {\r\n    flex:1;\r\n    text-align: center;\r\n    .iconfont{\r\n      font-size:.18rem;\r\n      margin: .07rem 0 .02rem 0;\r\n    }\r\n    a {\r\n      text-decoration: none;\r\n      color:$content-fontcolor;\r\n    }\r\n    &--active a {\r\n      color:#1FA4FC;\r\n    }\r\n  }\r\n  &__title {\r\n    font-size: .2rem;\r\n    transform: scale(.5, .5);\r\n    transform-origin: center top;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Docker.vue?vue&type=template&id=3444d875&scoped=true\"\nimport script from \"./Docker.vue?vue&type=script&lang=js\"\nexport * from \"./Docker.vue?vue&type=script&lang=js\"\n\nimport \"./Docker.vue?vue&type=style&index=0&id=3444d875&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3444d875\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"wapper\">\r\n      <div class=\"title\">我的订单</div>\r\n      <div class=\"products\" v-for=\"(item, index) in list\" :key=\"index\">\r\n        <div class=\"products__name\">\r\n          <div class=\"products__name__shop\">{{item.shopName}}</div>\r\n          <div class=\"products__name__state\">{{item.isCanceled ? '已取消' : '已下单' }}</div>\r\n        </div>\r\n        <div class=\"products__content\">\r\n          <div class=\"products__content__img\">\r\n            <img v-for=\"(innerItem, innerIndex) in item.products\" :key=\"innerIndex\" :src=\"innerItem.product.img\">\r\n          </div>\r\n          <div class=\"products__content__text\">\r\n            <div class=\"products__content__price\">&yen;{{item.totalPrice}}</div>\r\n            <div class=\"products__content__total\">共{{item.totalNumber}}件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <docker :currentIndex=\"2\" />\r\n</template>\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { get } from '../../utils/request'\r\nimport Docker from '../../components/Docker.vue'\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list: [] })\r\n  const getOrderList = async () => {\r\n    const result = await get('/api/order')\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data\r\n      console.log(orderList)\r\n      orderList.forEach((order) => {\r\n        const products = order.products || []\r\n        let totalPrice = 0\r\n        let totalNumber = 0\r\n        products.forEach((productItem) => {\r\n          totalNumber += (productItem?.orderSales || 0)\r\n          totalPrice += ((productItem?.product.price * productItem?.orderSales) || 0)\r\n        })\r\n        order.totalPrice = totalPrice\r\n        order.totalNumber = totalNumber\r\n      })\r\n\r\n      data.list = result.data\r\n    }\r\n  }\r\n  getOrderList()\r\n  const { list } = toRefs(data)\r\n  return { list }\r\n}\r\nexport default {\r\n  name: 'orderList',\r\n  components: { Docker },\r\n  setup () {\r\n    const { list } = useOrderListEffect()\r\n    return { list }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n@import '../../style/mixin.scss';\r\n.wapper {\r\n  background: #f5f5f5;\r\n  position: absolute;\r\n  left:0;\r\n  top:0;\r\n  bottom:.49rem;\r\n  right:0;\r\n  overflow-y:auto;\r\n}\r\n.title {\r\n  line-height: .44rem;\r\n   text-align: center;\r\n   background: #fff;\r\n   font-size:.16rem;\r\n}\r\n.products {\r\n  padding:.16rem;\r\n  background: #fff;\r\n  border-radius:.04rem;\r\n  margin:.16rem .16rem 0 .16rem;\r\n  &__name {\r\n    line-height:.4rem;\r\n    display: flex;\r\n    &__shop {\r\n      font-size:.16rem;\r\n      color: #333;\r\n      flex:1;\r\n    }\r\n    &__state {\r\n      font-size:.14rem;\r\n      color: #999;\r\n    }\r\n  }\r\n  &__content {\r\n    display: flex;\r\n    &__img {\r\n      flex:1;\r\n      display: flex;\r\n      // @include ellipses;\r\n      overflow-x: scroll;\r\n      img {\r\n        width:.4rem;\r\n        height:.4rem;\r\n        margin-right:.1rem;\r\n      }\r\n    }\r\n    &__text {\r\n      text-align: right;\r\n      padding-left:.2rem;\r\n    }\r\n    &__price {\r\n      color:#E93B3B;\r\n      font-size:.14rem;\r\n      padding:.03rem 0;\r\n    }\r\n    &__total {\r\n      font-size:.12rem;\r\n      color: #333;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./OrderList.vue?vue&type=template&id=a4845df6&scoped=true\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport \"./OrderList.vue?vue&type=style&index=0&id=a4845df6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a4845df6\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_Fragment","_renderList","$setup","dockerList","item","index","_normalizeClass","$props","currentIndex","key","icon","_createVNode","_component_router_link","to","_createElementVNode","innerHTML","_hoisted_3","_toDisplayString","text","name","props","setup","__exports__","render","_hoisted_2","list","_hoisted_4","shopName","_hoisted_5","isCanceled","_hoisted_6","_hoisted_7","products","innerItem","innerIndex","src","product","img","_hoisted_9","_hoisted_10","totalPrice","_hoisted_11","totalNumber","_component_docker","useOrderListEffect","data","reactive","getOrderList","async","result","get","errno","length","orderList","console","log","forEach","order","productItem","orderSales","price","toRefs","components","Docker"],"sourceRoot":""}