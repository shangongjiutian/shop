{"version":3,"file":"js/orderConfirmation.b6af6923.js","mappings":"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","sources":["webpack://shop/./src/effects/cartEffect.js","webpack://shop/./src/views/orderConfirmation/OrderConfirmation.vue","webpack://shop/./src/views/orderConfirmation/TopArea.vue","webpack://shop/./src/views/orderConfirmation/TopArea.vue?5803","webpack://shop/./src/views/orderConfirmation/ProductList.vue","webpack://shop/./src/views/orderConfirmation/ProductList.vue?54f6","webpack://shop/./src/views/orderConfirmation/Order.vue","webpack://shop/./src/views/orderConfirmation/Order.vue?af59","webpack://shop/./src/views/orderConfirmation/OrderConfirmation.vue?bcaf"],"sourcesContent":["import { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartInfo = (shopId, productId, productInfo, num) => {\r\n    // console.log(shopId, productId, productInfo)\r\n    store.commit('changeCartInfo', { shopId, productId, productInfo, num })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || {}\r\n    const notEmptyProductList = {}\r\n    for (const i in productList) {\r\n      const product = productList[i]\r\n      if (product.count > 0) {\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n  const orderProductList = computed(() => {\r\n    const orderProductList = cartList[shopId]?.productList || {}\r\n    const notEmptyProductList = {}\r\n    for (const i in orderProductList) {\r\n      const product = orderProductList[i]\r\n      if (product.check && product.count > 0) {\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n  const calacutions = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n          result.total += product.count\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    }\r\n    if (result.price > 0) {\r\n      result.price = result.price.toFixed(2)\r\n    }\r\n    return result\r\n  })\r\n  return { cartList, changeCartInfo, productList, shopName, calacutions, orderProductList }\r\n}\r\n","<template>\r\n  <div class=\"wapper\">\r\n    <TopArea />\r\n    <ProductList />\r\n    <Order />\r\n  </div>\r\n</template>\r\n<script>\r\nimport TopArea from './TopArea.vue'\r\nimport ProductList from './ProductList.vue'\r\nimport Order from './Order.vue'\r\nexport default {\r\n  name: 'OrderConfirmation',\r\n  components: { TopArea, ProductList, Order }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n@import '../../style/mixin.scss';\r\n.wapper {\r\n  position: absolute;\r\n  left:0;right:0;top:0;bottom:0;\r\n  padding-bottom:.49rem;\r\n  background: #eee;\r\n  overflow-y: scroll;\r\n}\r\n\r\n</style>\r\n","<template>\r\n    <div class=\"top\">\r\n      <div class=\"top__bgcor\"></div>\r\n      <div class=\"top__header\">\r\n        <div class=\"iconfont top__header__back\" @click=\"handleBackClick\">&#xe6db;</div>\r\n        确认订单\r\n      </div>\r\n      <div class=\"top__receiver\" @click=\"handleSelectClick\">\r\n        <div class=\"top__receiver__title\">收货地址</div>\r\n        <div class=\"top__receiver__adress\">\r\n          {{ hasAdress ? `${data.city}${data.department}${data.houseNumber}` : '请选择收货地址' }}\r\n        </div>\r\n        <div class=\"top__receiver__info\" v-if=\"hasAdress\">\r\n          <span class=\"top__receiver__info__name\">{{data.name}}</span>\r\n          <span class=\"top__receiver__info__name\">{{data.phone}}</span>\r\n        </div>\r\n        <div class=\"top__receiver__icon iconfont\">&#xe6db;</div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { onBeforeMount, reactive } from 'vue'\r\nimport { get } from '../../utils/request'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'TopArea',\r\n  setup () {\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const addressId = route.query.addressId\r\n    const data = reactive({})\r\n    const handleBackClick = () => {\r\n      router.back()\r\n    }\r\n    const handleSelectClick = () => {\r\n      const addressPath = route.path\r\n      console.log(addressPath)\r\n      router.push(`/addressSelect?path=${addressPath}`)\r\n    }\r\n    onBeforeMount(async () => {\r\n      if (addressId) {\r\n        const result = await get(`/api/user/address/${addressId}`)\r\n        if (result?.errno === 0) {\r\n          const resultData = result.data\r\n          data.city = resultData.city\r\n          data.department = resultData.department\r\n          data.houseNumber = resultData.houseNumber\r\n          data.name = resultData.name\r\n          data.phone = resultData.phone\r\n        }\r\n      }\r\n    })\r\n    return { handleBackClick, hasAdress: !!addressId, handleSelectClick, data }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.top {\r\n  height: 1.96rem;\r\n  background-image: linear-gradient(0deg, rgba(0,145,255,0.00) 4%, #0091FF 50%);\r\n  background-size: 100% 1.79rem;\r\n  background-repeat: no-repeat;\r\n  position: relative;\r\n  &__header {\r\n    position: relative;\r\n    padding-top:.26rem;\r\n    line-height:.24rem;\r\n    color: #fff;\r\n    text-align: center;\r\n    font-size:.16rem;\r\n    &__back {\r\n      position: absolute;\r\n      left: .18rem;\r\n      font-size: .22rem;\r\n    }\r\n  }\r\n  &__receiver {\r\n    position: absolute;\r\n    left: .18rem;\r\n    right:.18rem;\r\n    background: #fff;\r\n    border-radius:.04rem;\r\n    height:1.1rem;\r\n    bottom:0;\r\n    &__title {\r\n      line-height:.22rem;\r\n      padding:.16rem 0 .14rem .16rem;\r\n      font-size:.16rem;\r\n      color:#333;\r\n    }\r\n    &__adress {\r\n      padding: 0 .4rem 0 .16rem;\r\n      color: #333;\r\n      font-size:.14rem;\r\n      line-height: .2rem;\r\n    }\r\n    &__info {\r\n      padding: .06rem 0 0 .16rem;\r\n      &__name {\r\n        color: #666;\r\n        line-height: .18rem;\r\n        font-size:.12rem;\r\n        margin-right:.06rem;\r\n      }\r\n    }\r\n    &__icon {\r\n      position: absolute;\r\n      right:.16rem;\r\n      top:.5rem;\r\n      font-size:.24rem;\r\n      color: #666;\r\n      transform: rotate(180deg);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./TopArea.vue?vue&type=template&id=17b1f738&scoped=true\"\nimport script from \"./TopArea.vue?vue&type=script&lang=js\"\nexport * from \"./TopArea.vue?vue&type=script&lang=js\"\n\nimport \"./TopArea.vue?vue&type=style&index=0&id=17b1f738&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-17b1f738\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"product\">\r\n      <div class=\"product__title\">{{shopName}}</div>\r\n      <div class=\"product__item\" v-for=\"item in orderProductList\" :key=\"item._id\">\r\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n        <div class=\"product__item__detail\">\r\n            <h4 class=\"product__item__title\">{{item.name}}</h4>\r\n            <p class=\"product__item__price\">\r\n                <span class=\"product__item__yen\">&yen;{{item.price}}</span>\r\n                <span class=\"product__item__count\">×{{item.count}}</span>\r\n                <span class=\"product__item__origin\">&yen;{{(item.price * item.count).toFixed(2) }}</span>\r\n            </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { useCommonCartEffect } from '../../effects/cartEffect'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'CartList',\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const { orderProductList, shopName } = useCommonCartEffect(shopId)\r\n    return { orderProductList, shopName }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/mixin.scss';\r\n.product {\r\n  background:#fff;\r\n  margin:.1rem .18rem;\r\n  padding:.16rem;\r\n  &__title {\r\n    font-size:.16rem;\r\n    color: #333;\r\n  }\r\n  &__item {\r\n    display: flex;\r\n    padding-top:.16rem;\r\n    &__img {\r\n      width:.46rem;\r\n      height:.46rem;\r\n    }\r\n    &__detail {\r\n      flex:1;\r\n      overflow: hidden;\r\n      padding-left:.16rem;\r\n    }\r\n    &__title {\r\n      font-weight: normal;\r\n      font-size:.14rem;\r\n      color: #333;\r\n      line-height: .22rem;\r\n      padding:0;\r\n      margin:0;\r\n      @include ellipses\r\n    }\r\n    &__price {\r\n      display: flex;\r\n      margin:.05rem 0 0 0;\r\n    }\r\n    &__yen {\r\n      color:#E93B3B;\r\n      font-size:.14rem;\r\n      line-height: .16rem;\r\n    }\r\n    &__count {\r\n      flex:1;\r\n      color:#E93B3B;\r\n      font-size:.12rem;\r\n      padding-left:.08rem;\r\n      line-height: .16rem;\r\n    }\r\n    &__origin {\r\n      color:#333;\r\n      font-size:.14rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./ProductList.vue?vue&type=template&id=aec39c18&scoped=true\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js\"\n\nimport \"./ProductList.vue?vue&type=style&index=0&id=aec39c18&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-aec39c18\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"bottom\">\r\n        <div class=\"bottom__amount\">实付金额<span>&yen;{{calacutions.price}}</span></div>\r\n        <div v-if=\"showSubmitBtn\" class=\"bottom__submit\" @click=\"() => handleSubmitClick(true)\">提交订单</div>\r\n    </div>\r\n    <div class=\"mask\" v-if=\"showMask\"  @click=\"() => handleSubmitClick(false)\">\r\n        <div class=\"mask__content\" @click.stop>\r\n            <div class=\"mask__content__title\">确认离开收银台？</div>\r\n            <p class=\"mask__content__desc\">请尽快完成支付，否则将被取消</p>\r\n            <div class=\"mask__content__btns\">\r\n                <div class=\"mask__content__cancel\" @click=\"() => handleConfirmOrder(true)\">取消订单</div>\r\n                <div class=\"mask__content__confirm\" @click=\"() => handleConfirmOrder(false)\">确认支付</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { useCommonCartEffect } from '../../effects/cartEffect'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { ref } from 'vue'\r\nimport { post } from '../../utils/request'\r\nconst useMakeOrderEffect = (shopId, shopName, productList, addressId) => {\r\n  const router = useRouter()\r\n  const store = useStore()\r\n  const handleConfirmOrder = async (isCanceled) => {\r\n    const products = []\r\n    for (const i in productList.value) {\r\n      const product = productList.value[i]\r\n      products.push({ id: parseInt(product._id, 10), num: product.count })\r\n    }\r\n    try {\r\n      const result = await post('/api/order', {\r\n        addressId,\r\n        shopId,\r\n        shopName: shopName.value,\r\n        isCanceled,\r\n        products\r\n      })\r\n      if (result?.errno === 0) {\r\n        const cartList = JSON.parse(localStorage.cartList || '{}')\r\n        delete cartList[shopId]\r\n        localStorage.cartList = JSON.stringify(cartList)\r\n        store.commit('clearCartData', shopId)\r\n        router.push({ name: 'OrderList' })\r\n      }\r\n    } catch (e) {\r\n      console.log('下单失败')\r\n    }\r\n  }\r\n  return { handleConfirmOrder }\r\n}\r\nconst useMaskEffect = () => {\r\n  const showMask = ref(false)\r\n  const handleSubmitClick = (status) => {\r\n    showMask.value = status\r\n  }\r\n  return { handleSubmitClick, showMask }\r\n}\r\nexport default {\r\n  name: 'Order',\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = parseInt(route.params.id, 10)\r\n    const addressId = route.query.addressId\r\n    const { calacutions, shopName, productList } = useCommonCartEffect(shopId)\r\n    const { handleConfirmOrder } = useMakeOrderEffect(shopId, shopName, productList, addressId)\r\n    const { handleSubmitClick, showMask } = useMaskEffect()\r\n    return { calacutions, handleSubmitClick, showMask, handleConfirmOrder, showSubmitBtn: !!addressId }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.bottom {\r\n  position: fixed;\r\n  bottom:0;\r\n  left:0;\r\n  right:0;\r\n  height:.49rem;\r\n  background: #fff;\r\n  display: flex;\r\n  &__amount {\r\n    flex:1;\r\n    line-height: .49rem;\r\n    font-size:.14rem;\r\n    color: #333;\r\n    padding-left:.24rem;\r\n    span {color: #151515;font-size:.16rem;padding-left:.05rem;}\r\n  }\r\n  &__submit {\r\n    width:.98rem;\r\n    background: #4FB0F9;\r\n    line-height: .49rem;\r\n    color: #fff;\r\n    font-size:.14rem;\r\n    text-align: center;\r\n  }\r\n}\r\n.mask {\r\n    position:fixed;\r\n    left:0; right:0; bottom: 0;top: 0;\r\n    background: rgba(0,0,0,.3);\r\n    &__content {\r\n        width:3rem;\r\n        height:1.6rem;\r\n        background: #fff;\r\n        position: absolute;\r\n        top:50%;\r\n        left:50%;\r\n        transform: translate(-50%, -50%);\r\n        border-radius:.04rem;\r\n        &__title {\r\n            font-size:.18rem;\r\n            color: #333;\r\n            text-align: center;\r\n            line-height: .26rem;\r\n            margin:.24rem 0 0 0;\r\n        }\r\n        &__desc {\r\n            font-size:.14rem;\r\n            margin:.1rem 0 0 0 ;\r\n            color: #666;\r\n            text-align: center;\r\n        }\r\n        &__btns {\r\n            margin:.24rem .58rem 0 .58rem;\r\n            display: flex;\r\n        }\r\n        &__cancel {\r\n            width:.8rem;\r\n            height:.32rem;\r\n            line-height:.32rem;\r\n            color: #4FB0F9;\r\n            border:.01rem solid #4FB0F9;\r\n            text-align: center;\r\n            border-radius:.16rem;\r\n            font-size:.14rem;\r\n            box-sizing: border-box;\r\n            margin-right:.24rem;\r\n        }\r\n        &__confirm {\r\n            width:.8rem;\r\n            height:.32rem;\r\n            background: #4FB0F9;\r\n            text-align: center;\r\n            color:#fff;\r\n            font-size:.14rem;\r\n            line-height: .32rem;\r\n            border-radius:.16rem;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./Order.vue?vue&type=template&id=1d91a668&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=1d91a668&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d91a668\"]])\n\nexport default __exports__","import { render } from \"./OrderConfirmation.vue?vue&type=template&id=0c888249&scoped=true\"\nimport script from \"./OrderConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./OrderConfirmation.vue?vue&type=script&lang=js\"\n\nimport \"./OrderConfirmation.vue?vue&type=style&index=0&id=0c888249&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c888249\"]])\n\nexport default __exports__"],"names":["useCommonCartEffect","shopId","store","useStore","cartList","state","changeCartInfo","productId","productInfo","num","commit","productList","computed","notEmptyProductList","i","product","count","orderProductList","check","shopName","calacutions","result","total","price","allChecked","toFixed","class","_createElementBlock","_hoisted_1","_createVNode","_component_TopArea","_component_ProductList","_component_Order","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","args","$setup","handleBackClick","handleSelectClick","_hoisted_4","_hoisted_5","_toDisplayString","hasAdress","data","city","department","houseNumber","_hoisted_6","_hoisted_7","name","_hoisted_8","phone","_hoisted_9","setup","router","useRouter","route","useRoute","addressId","query","reactive","back","addressPath","path","console","log","push","onBeforeMount","async","get","errno","resultData","__exports__","_Fragment","_renderList","item","key","_id","src","imgUrl","params","id","showSubmitBtn","handleSubmitClick","showMask","_withModifiers","handleConfirmOrder","useMakeOrderEffect","products","value","parseInt","post","isCanceled","JSON","parse","localStorage","stringify","e","useMaskEffect","ref","status","components","TopArea","ProductList","Order","render"],"sourceRoot":""}