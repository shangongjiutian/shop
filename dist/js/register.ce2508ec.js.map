{"version":3,"file":"js/register.ce2508ec.js","mappings":"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","sources":["webpack://shop/./src/components/Toast.vue","webpack://shop/./src/components/Toast.vue?44c7","webpack://shop/./src/views/register/Register.vue","webpack://shop/./src/views/register/Register.vue?6e35"],"sourcesContent":["<template>\r\n    <div class=\"toast\">{{message}}</div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nexport default {\r\n  name: 'Toast',\r\n  props: ['message']\r\n}\r\nexport const useToastEffect = () => {\r\n  const toastData = reactive({ show: false, toastMessage: '', showClass: '' })\r\n  const showToast = (message) => {\r\n    toastData.show = TextTrackCueList\r\n    toastData.toastMessage = message\r\n    setTimeout(() => {\r\n      toastData.show = false\r\n      toastData.toastMessage = ''\r\n    }, 2000)\r\n  }\r\n  const { show, toastMessage } = toRefs(toastData)\r\n  return { toastMessage, showToast, show }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.toast {\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background: rgba(0,0,0,.6);\r\n    border-radius:.05rem;\r\n    padding:.1rem;\r\n    color:#fff;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=7d38c1a6&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=7d38c1a6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7d38c1a6\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"wrapper\">\r\n        <img class=\"wrapper__img\" src=\"http://www.dell-lee.com/imgs/vue3/user.png\" />\r\n        <div class=\"wrapper__content\">\r\n            <input class=\"wrapper__content-input\" v-model=\"username\" placeholder=\"请输入用户名\"/>\r\n        </div>\r\n        <div class=\"wrapper__content\">\r\n            <input class=\"wrapper__content-input\" v-model=\"password\" type=\"password\" autocomplete=\"new-password\" placeholder=\"请输入密码\" />\r\n        </div>\r\n        <div class=\"wrapper__content\">\r\n            <input class=\"wrapper__content-input\" v-model=\"ensurement\" type=\"password\" placeholder=\"请确认密码\" />\r\n        </div>\r\n        <div class=\"wrapper__button\">\r\n            <button class=\"wrapper__button-button\" @click=\"handleRegister\">立即注册</button>\r\n        </div>\r\n        <div class=\"wrapper__link\" @click=\"handleLogin\">已有账号去登录</div>\r\n        <Toast v-if=\"show\" :message=\"toastMessage\" />\r\n    </div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\nconst useRegisterEffect = (showToast) => {\r\n  const router = useRouter()\r\n  const data = reactive({ username: '', password: '', ensurement: '' })\r\n  const handleRegister = async () => {\r\n    try {\r\n      const { username, password, ensurement } = data\r\n      if (username.trim() === '' || password.trim() === '') {\r\n        showToast('用户名或密码不能为空')\r\n        return\r\n      }\r\n      if (password !== ensurement) {\r\n        showToast('密码输入不一致')\r\n        return\r\n      }\r\n      if (username.length < 6) {\r\n        showToast('用户名太短')\r\n        return\r\n      }\r\n      const result = await post('/api/user/register', {\r\n        username: data.username,\r\n        password: data.password,\r\n        ensurement: data.ensurement\r\n      })\r\n      if (result?.errno === 0) {\r\n        router.push({ name: 'Login' })\r\n      } else {\r\n        showToast('注册失败')\r\n      }\r\n    } catch (e) {\r\n      showToast('请求失败')\r\n    }\r\n  }\r\n  const { username, password, ensurement } = toRefs(data)\r\n  return { handleRegister, username, password, ensurement }\r\n}\r\nexport default {\r\n  components: { Toast },\r\n  name: 'Register',\r\n  setup () {\r\n    const router = useRouter()\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const { handleRegister, username, password, ensurement } = useRegisterEffect(showToast)\r\n    const handleLogin = () => {\r\n      router.push({ name: 'Login' })\r\n    }\r\n    return { handleLogin, handleRegister, username, password, ensurement, toastMessage, show }\r\n  }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n    position: absolute;\r\n    text-align:center;\r\n    top:50%;\r\n    left:0;\r\n    right:0;\r\n    transform: translateY(-60%);\r\n    &__img {\r\n        width:.66rem;\r\n        height:.66rem;\r\n        display: block;\r\n        margin:0 auto .4rem auto;\r\n    }\r\n    &__content {\r\n        height:.48rem;\r\n        margin:0 .4rem .16rem .4rem;\r\n        padding:0 .16rem;\r\n        background: #F9F9F9;\r\n        border: .01rem solid rgba(0,0,0,0.10);\r\n        border-radius: .06rem;\r\n        border-radius: .06rem;\r\n        &-input {\r\n          margin-top:.12rem;\r\n            line-height: .22rem;\r\n            border: none;\r\n            outline: none;\r\n            width: 100%;\r\n            background: none;\r\n            font-size: .16rem;\r\n            color:$content-fontcolor;\r\n            &::placeholder {\r\n                color: $content-notice-fontcolor;\r\n            }\r\n        }\r\n    }\r\n    &__button {\r\n        margin: .32rem .4rem .16rem .4rem;\r\n        &-button {\r\n            height:.48rem;\r\n            background: #0091FF;\r\n            box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n            border-radius: .04rem;\r\n            border-radius: .04rem;\r\n            color: #fff;\r\n            font-size: .16rem;\r\n            text-align: center;\r\n            width:100%;\r\n            border:none;\r\n        }\r\n    }\r\n    &__link {\r\n        text-align: center;\r\n        font-size: .14rem;\r\n        color: $content-notice-fontcolor;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./Register.vue?vue&type=template&id=68a04d3f&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=68a04d3f&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68a04d3f\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_toDisplayString","$props","message","name","props","useToastEffect","toastData","reactive","show","toastMessage","showClass","showToast","TextTrackCueList","setTimeout","toRefs","__exports__","render","_createElementVNode","src","_hoisted_2","_hoisted_3","$setup","username","$event","placeholder","_hoisted_4","password","type","autocomplete","_hoisted_5","ensurement","_hoisted_6","onClick","_cache","args","handleRegister","handleLogin","_createBlock","_component_Toast","useRegisterEffect","router","useRouter","data","async","trim","length","result","post","errno","push","e","components","Toast","setup"],"sourceRoot":""}