"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[685],{9168:function(e,s,n){n.d(s,{Z:function(){return i},S:function(){return c}});var t=n(6252),a=n(3577);const r={class:"toast"};function o(e,s,n,o,u,p){return(0,t.wg)(),(0,t.iD)("div",r,(0,a.zw)(n.message),1)}var u=n(2262),p={name:"Toast",props:["message"]};const c=()=>{const e=(0,u.qj)({show:!1,toastMessage:"",showClass:""}),s=s=>{e.show=TextTrackCueList,e.toastMessage=s,setTimeout((()=>{e.show=!1,e.toastMessage=""}),2e3)},{show:n,toastMessage:t}=(0,u.BK)(e);return{toastMessage:t,showToast:s,show:n}};var d=n(3744);const l=(0,d.Z)(p,[["render",o],["__scopeId","data-v-7d38c1a6"]]);var i=l},8790:function(e,s,n){n.r(s),n.d(s,{default:function(){return y}});var t=n(6252),a=n(9963);const r=e=>((0,t.dD)("data-v-68a04d3f"),e=e(),(0,t.Cn)(),e),o={class:"wrapper"},u=r((()=>(0,t._)("img",{class:"wrapper__img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1))),p={class:"wrapper__content"},c={class:"wrapper__content"},d={class:"wrapper__content"},l={class:"wrapper__button"};function i(e,s,n,r,i,w){const m=(0,t.up)("Toast");return(0,t.wg)(),(0,t.iD)("div",o,[u,(0,t._)("div",p,[(0,t.wy)((0,t._)("input",{class:"wrapper__content-input","onUpdate:modelValue":s[0]||(s[0]=e=>r.username=e),placeholder:"请输入用户名"},null,512),[[a.nr,r.username]])]),(0,t._)("div",c,[(0,t.wy)((0,t._)("input",{class:"wrapper__content-input","onUpdate:modelValue":s[1]||(s[1]=e=>r.password=e),type:"password",autocomplete:"new-password",placeholder:"请输入密码"},null,512),[[a.nr,r.password]])]),(0,t._)("div",d,[(0,t.wy)((0,t._)("input",{class:"wrapper__content-input","onUpdate:modelValue":s[2]||(s[2]=e=>r.ensurement=e),type:"password",placeholder:"请确认密码"},null,512),[[a.nr,r.ensurement]])]),(0,t._)("div",l,[(0,t._)("button",{class:"wrapper__button-button",onClick:s[3]||(s[3]=(...e)=>r.handleRegister&&r.handleRegister(...e))},"立即注册")]),(0,t._)("div",{class:"wrapper__link",onClick:s[4]||(s[4]=(...e)=>r.handleLogin&&r.handleLogin(...e))},"已有账号去登录"),r.show?((0,t.wg)(),(0,t.j4)(m,{key:0,message:r.toastMessage},null,8,["message"])):(0,t.kq)("",!0)])}n(7658);var w=n(2262),m=n(2201),_=n(1117),g=n(9168);const h=e=>{const s=(0,m.tv)(),n=(0,w.qj)({username:"",password:"",ensurement:""}),t=async()=>{try{const{username:t,password:a,ensurement:r}=n;if(""===t.trim()||""===a.trim())return void e("用户名或密码不能为空");if(a!==r)return void e("密码输入不一致");if(t.length<6)return void e("用户名太短");const o=await(0,_.v)("/api/user/register",{username:n.username,password:n.password,ensurement:n.ensurement});0===o?.errno?s.push({name:"Login"}):e("注册失败")}catch(t){e("请求失败")}},{username:a,password:r,ensurement:o}=(0,w.BK)(n);return{handleRegister:t,username:a,password:r,ensurement:o}};var v={components:{Toast:g.Z},name:"Register",setup(){const e=(0,m.tv)(),{show:s,toastMessage:n,showToast:t}=(0,g.S)(),{handleRegister:a,username:r,password:o,ensurement:u}=h(t),p=()=>{e.push({name:"Login"})};return{handleLogin:p,handleRegister:a,username:r,password:o,ensurement:u,toastMessage:n,show:s}}},f=n(3744);const k=(0,f.Z)(v,[["render",i],["__scopeId","data-v-68a04d3f"]]);var y=k}}]);
//# sourceMappingURL=register.ce2508ec.js.map