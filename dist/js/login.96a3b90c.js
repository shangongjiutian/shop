"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[535],{9168:function(s,e,a){a.d(e,{Z:function(){return d},S:function(){return u}});var n=a(6252),t=a(3577);const o={class:"toast"};function r(s,e,a,r,c,p){return(0,n.wg)(),(0,n.iD)("div",o,(0,t.zw)(a.message),1)}var c=a(2262),p={name:"Toast",props:["message"]};const u=()=>{const s=(0,c.qj)({show:!1,toastMessage:"",showClass:""}),e=e=>{s.show=TextTrackCueList,s.toastMessage=e,setTimeout((()=>{s.show=!1,s.toastMessage=""}),2e3)},{show:a,toastMessage:n}=(0,c.BK)(s);return{toastMessage:n,showToast:e,show:a}};var l=a(3744);const i=(0,l.Z)(p,[["render",r],["__scopeId","data-v-7d38c1a6"]]);var d=i},956:function(s,e,a){a.r(e),a.d(e,{default:function(){return f}});var n=a(6252),t=a(9963);const o=s=>((0,n.dD)("data-v-5e65e924"),s=s(),(0,n.Cn)(),s),r={class:"wrapper"},c=o((()=>(0,n._)("img",{class:"wrapper__img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1))),p={class:"wrapper__content"},u={class:"wrapper__content"},l={class:"wrapper__button"};function i(s,e,a,o,i,d){const w=(0,n.up)("Toast");return(0,n.wg)(),(0,n.iD)("div",r,[c,(0,n._)("div",p,[(0,n.wy)((0,n._)("input",{class:"wrapper__content-input","onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),placeholder:"请输入用户名"},null,512),[[t.nr,o.username]])]),(0,n._)("div",u,[(0,n.wy)((0,n._)("input",{class:"wrapper__content-input","onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),type:"password",autocomplete:"new-password",placeholder:"请输入密码"},null,512),[[t.nr,o.password]])]),(0,n._)("div",l,[(0,n._)("button",{class:"wrapper__button-button",onClick:e[2]||(e[2]=(...s)=>o.handleLogin&&o.handleLogin(...s))},"登录")]),(0,n._)("div",{class:"wrapper__link",onClick:e[3]||(e[3]=(...s)=>o.handleRegisterClick&&o.handleRegisterClick(...s))},"立即注册"),o.show?((0,n.wg)(),(0,n.j4)(w,{key:0,message:o.toastMessage},null,8,["message"])):(0,n.kq)("",!0)])}a(7658);var d=a(2262),w=a(2201),g=a(1117),h=a(9168);const m=s=>{const e=(0,w.tv)(),a=(0,d.qj)({username:"",password:""}),n=async()=>{try{const n=await(0,g.v)("/api/user/login",{username:a.username,password:a.password});0===n?.errno?(localStorage.isLogin=!0,e.push({name:"Home"})):s("登录失败");const{username:t,password:o}=a;if(""===t.trim()||""===o.trim())return void s("用户名或密码不能为空")}catch(n){s("请求失败")}},{username:t,password:o}=(0,d.BK)(a);return{handleLogin:n,username:t,password:o}},_=()=>{const s=(0,w.tv)(),e=()=>{s.push({name:"Register"})};return{handleRegisterClick:e}};var v={name:"Login",components:{Toast:h.Z},setup(){const{show:s,toastMessage:e,showToast:a}=(0,h.S)(),{handleLogin:n,username:t,password:o}=m(a),{handleRegisterClick:r}=_();return{handleLogin:n,handleRegisterClick:r,username:t,password:o,toastMessage:e,show:s}}},k=a(3744);const C=(0,k.Z)(v,[["render",i],["__scopeId","data-v-5e65e924"]]);var f=C}}]);
//# sourceMappingURL=login.96a3b90c.js.map