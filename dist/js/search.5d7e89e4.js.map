{"version":3,"file":"js/search.5d7e89e4.js","mappings":"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","sources":["webpack://shop/./src/views/search/Search.vue","webpack://shop/./src/views/search/Search.vue?bd63"],"sourcesContent":["<template>\r\n    <div class=\"wapper\">\r\n        <div class=\"search\">\r\n            <span class=\"search__icon iconfont\">&#xe615;</span>\r\n            <input class=\"search__area\" placeholder=\"新鲜水果\" @change=\"handleSearchChange\"/>\r\n            <div class=\"search__cancel\" @click=\"handleCancelClick\">取消</div>\r\n        </div>\r\n        <div class=\"record\" v-if=\"history.length\">\r\n            <div class=\"record__top\">\r\n                <div class=\"record__title\">搜索历史</div>\r\n                <div class=\"record__clear\" @click=\"handleClearClick\">清除搜索历史</div>\r\n            </div>\r\n            <div class=\"record__content\">\r\n                <ul>\r\n                    <li v-for=\"item in history\" :key=\"item\"  @click=\"() => goToSearchList(item)\">{{item}}</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"record\">\r\n            <div class=\"record__top\">\r\n                <div class=\"record__title\">热门搜索</div>\r\n            </div>\r\n            <div class=\"record__content\">\r\n                <ul>\r\n                    <li v-for=\"item in hotWords\" :key=\"item\" @click=\"() => goToSearchList(item)\">{{item}}</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\n// 热门搜索相关逻辑\r\nconst useHotWordListEffect = () => {\r\n  const hotWords = ref([])\r\n  const getHotWords = async () => {\r\n    const result = await get('/api/shop/search/hot-words')\r\n    if (result?.errno === 0 && result?.data) {\r\n      hotWords.value = result.data\r\n    }\r\n  }\r\n  return { hotWords, getHotWords }\r\n}\r\nexport default {\r\n  name: 'Search',\r\n  setup () {\r\n    const router = useRouter()\r\n    const history = ref(JSON.parse(localStorage.history || '[]'))\r\n    // 当用户输入搜索内容后，执行操作\r\n    const handleSearchChange = (e) => {\r\n      const searchValue = e.target.value\r\n      if (!searchValue) return\r\n      const hasValue = history.value.find(item => item === searchValue)\r\n      if (!hasValue) {\r\n        history.value.push(searchValue)\r\n        localStorage.history = JSON.stringify(history.value)\r\n      }\r\n      router.push(`/searchList?keyword=${searchValue}`)\r\n    }\r\n    const handleClearClick = () => {\r\n      history.value = []\r\n      localStorage.history = JSON.stringify([])\r\n    }\r\n    const handleCancelClick = () => {\r\n      router.back()\r\n    }\r\n    const goToSearchList = (keyword) => {\r\n      router.push(`/searchList?keyword=${keyword}`)\r\n    }\r\n    const { hotWords, getHotWords } = useHotWordListEffect()\r\n    getHotWords()\r\n    return { handleSearchChange, history, handleClearClick, handleCancelClick, hotWords, getHotWords, goToSearchList }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.wapper {\r\n    margin:0 .18rem;\r\n}\r\n.search {\r\n    display: flex;\r\n    position: relative;\r\n    line-height:.32rem;\r\n    height:.32rem;\r\n    margin-top:.16rem;\r\n    color:#333;\r\n    &__icon {\r\n        position: absolute;\r\n        left:.16rem;\r\n        color:#b7b7b7;\r\n        top:.02rem;\r\n    }\r\n    &__area {\r\n        flex:1;\r\n        height:.32rem;\r\n        border-radius:.16rem;\r\n        border:none;\r\n        background: #f5f5f5;\r\n        outline: none;\r\n        padding-left:.46rem;\r\n        font-size:.14rem;\r\n        color:#333;\r\n    }\r\n    &__cancel {\r\n        font-size:.16rem;\r\n        margin-left:.12rem;\r\n    }\r\n}\r\n.record {\r\n    margin-top:.24rem;\r\n    &__top {\r\n        display: flex;\r\n        color: #333;\r\n        line-height: .22rem;\r\n    }\r\n    &__title {\r\n        font-size:.16rem;\r\n        flex: 1;\r\n    }\r\n    &__clear {\r\n        font-size:.14rem;\r\n    }\r\n    &__content {\r\n        margin-top:.1rem;\r\n        ul {\r\n            margin:0;\r\n            padding:0;\r\n            list-style-type: none;\r\n            li {\r\n                display: inline-block;\r\n                height:.32rem;\r\n                background: #f5f5f5;\r\n                border-radius:.02rem;\r\n                line-height: .32rem;\r\n                color: #666;\r\n                font-size:.14rem;\r\n                padding:0 .1rem;\r\n                margin-right:.1rem;\r\n                margin-top:.1rem;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./Search.vue?vue&type=template&id=70caff10&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=70caff10&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-70caff10\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","placeholder","onChange","_cache","args","$setup","handleSearchChange","onClick","handleCancelClick","history","length","_hoisted_4","_hoisted_5","_hoisted_6","handleClearClick","_hoisted_7","_Fragment","_renderList","item","key","goToSearchList","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","hotWords","_hoisted_12","useHotWordListEffect","ref","getHotWords","async","result","get","errno","data","value","name","setup","router","useRouter","JSON","parse","localStorage","e","searchValue","target","hasValue","find","push","stringify","back","keyword","__exports__","render"],"sourceRoot":""}