"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[464],{3694:function(a,e,c){c.r(e),c.d(e,{default:function(){return L}});var r=c(6252),s=c(3577);const o=a=>((0,r.dD)("data-v-70caff10"),a=a(),(0,r.Cn)(),a),l={class:"wapper"},n={class:"search"},t=o((()=>(0,r._)("span",{class:"search__icon iconfont"},"",-1))),i={key:0,class:"record"},d={class:"record__top"},h=o((()=>(0,r._)("div",{class:"record__title"},"搜索历史",-1))),_={class:"record__content"},u=["onClick"],v={class:"record"},C=o((()=>(0,r._)("div",{class:"record__top"},[(0,r._)("div",{class:"record__title"},"热门搜索")],-1))),g={class:"record__content"},k=["onClick"];function p(a,e,c,o,p,f){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",n,[t,(0,r._)("input",{class:"search__area",placeholder:"新鲜水果",onChange:e[0]||(e[0]=(...a)=>o.handleSearchChange&&o.handleSearchChange(...a))},null,32),(0,r._)("div",{class:"search__cancel",onClick:e[1]||(e[1]=(...a)=>o.handleCancelClick&&o.handleCancelClick(...a))},"取消")]),o.history.length?((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",d,[h,(0,r._)("div",{class:"record__clear",onClick:e[2]||(e[2]=(...a)=>o.handleClearClick&&o.handleClearClick(...a))},"清除搜索历史")]),(0,r._)("div",_,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.history,(a=>((0,r.wg)(),(0,r.iD)("li",{key:a,onClick:()=>o.goToSearchList(a)},(0,s.zw)(a),9,u)))),128))])])])):(0,r.kq)("",!0),(0,r._)("div",v,[C,(0,r._)("div",g,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.hotWords,(a=>((0,r.wg)(),(0,r.iD)("li",{key:a,onClick:()=>o.goToSearchList(a)},(0,s.zw)(a),9,k)))),128))])])])])}c(7658);var f=c(2262),w=c(2201),y=c(1117);const S=()=>{const a=(0,f.iH)([]),e=async()=>{const e=await(0,y.U)("/api/shop/search/hot-words");0===e?.errno&&e?.data&&(a.value=e.data)};return{hotWords:a,getHotWords:e}};var D={name:"Search",setup(){const a=(0,w.tv)(),e=(0,f.iH)(JSON.parse(localStorage.history||"[]")),c=c=>{const r=c.target.value;if(!r)return;const s=e.value.find((a=>a===r));s||(e.value.push(r),localStorage.history=JSON.stringify(e.value)),a.push(`/searchList?keyword=${r}`)},r=()=>{e.value=[],localStorage.history=JSON.stringify([])},s=()=>{a.back()},o=e=>{a.push(`/searchList?keyword=${e}`)},{hotWords:l,getHotWords:n}=S();return n(),{handleSearchChange:c,history:e,handleClearClick:r,handleCancelClick:s,hotWords:l,getHotWords:n,goToSearchList:o}}},H=c(3744);const W=(0,H.Z)(D,[["render",p],["__scopeId","data-v-70caff10"]]);var L=W}}]);
//# sourceMappingURL=search.5d7e89e4.js.map